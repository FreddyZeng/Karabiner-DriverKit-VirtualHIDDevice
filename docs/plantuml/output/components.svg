<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="911px" preserveAspectRatio="none" style="width:532px;height:911px;" version="1.1" viewBox="0 0 532 911" width="532px" zoomAndPan="magnify"><defs><filter height="300%" id="f1f9jaj6za1dda" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[c031ec308a348c93805ec4e889570517]
cluster DriverKit driver--><polygon fill="#FFFFFF" filter="url(#f1f9jaj6za1dda)" points="103,472,221,472,228,494.4883,510,494.4883,510,899,103,899,103,472" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="103" x2="228" y1="494.4883" y2="494.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="107" y="487.5352">DriverKit driver</text><!--MD5=[ea976b6ded91642f036cb6ad72228a71]
cluster VirtualHIDDeviceClient--><polygon fill="#FFFFFF" filter="url(#f1f9jaj6za1dda)" points="103,127,275,127,282,149.4883,401,149.4883,401,448,103,448,103,127" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="103" x2="282" y1="149.4883" y2="149.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="107" y="142.5352">VirtualHIDDeviceClient</text><!--MD5=[130d719b9edcf39af80cdb750cbc63cb]
cluster Client app--><polygon fill="#FFFFFF" filter="url(#f1f9jaj6za1dda)" points="16,6,96,6,103,28.4883,488,28.4883,488,103,16,103,16,6" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="16" x2="103" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="20" y="21.5352">Client app</text><!--MD5=[824e7d5d8f2870b79b0b1350f52fbd60]
entity IOService--><ellipse cx="252" cy="536" fill="#FEFECE" filter="url(#f1f9jaj6za1dda)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="220.5" y="566.5352">IOService</text><!--MD5=[1fdcbd6e8f3918c17f78710bc6ae72ca]
entity VirtualHIDDeviceRoot--><rect fill="#FEFECE" filter="url(#f1f9jaj6za1dda)" height="46.4883" style="stroke: #A80036; stroke-width: 1.5;" width="185" x="159.5" y="625"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="324.5" y="630"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="322.5" y="632"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="322.5" y="636"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="145" x="174.5" y="658.5352">VirtualHIDDeviceRoot</text><!--MD5=[4c22496b1f0006fac8f6a746c1676456]
entity VirtualHIDDeviceUserClient--><rect fill="#FEFECE" filter="url(#f1f9jaj6za1dda)" height="46.4883" style="stroke: #A80036; stroke-width: 1.5;" width="224" x="140" y="731"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="344" y="736"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="342" y="738"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="342" y="742"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="184" x="155" y="764.5352">VirtualHIDDeviceUserClient</text><!--MD5=[a94dd975cc454f373ef2618833effd6a]
entity VirtualHIDKeyboard--><rect fill="#FEFECE" filter="url(#f1f9jaj6za1dda)" height="46.4883" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="119" y="837"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="273" y="842"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="271" y="844"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="271" y="848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="134" y="870.5352">VirtualHIDKeyboard</text><!--MD5=[1ae22d4f36c3d03837c2b39918608a0b]
entity VirtualHIDPointing--><rect fill="#FEFECE" filter="url(#f1f9jaj6za1dda)" height="46.4883" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="328" y="837"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="474" y="842"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="472" y="844"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="472" y="848"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="343" y="870.5352">VirtualHIDPointing</text><!--MD5=[aaa252e42fad5c2cd8ddc4d89dccbbd6]
entity serversock--><ellipse cx="252" cy="191" fill="#FEFECE" filter="url(#f1f9jaj6za1dda)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="183.5" y="221.5352">UNIX domain socket</text><!--MD5=[c2b3663ec82739b661762c935a5b3878]
entity virtual_hid_device_service_server--><rect fill="#FEFECE" filter="url(#f1f9jaj6za1dda)" height="46.4883" style="stroke: #A80036; stroke-width: 1.5;" width="265" x="119.5" y="280"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="364.5" y="285"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="362.5" y="287"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="362.5" y="291"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="225" x="134.5" y="313.5352">virtual_hid_device_service_server</text><!--MD5=[0130dee7139e2f5a30799d0ad4660693]
entity io_service_client--><rect fill="#FEFECE" filter="url(#f1f9jaj6za1dda)" height="46.4883" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="176.5" y="386"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="307.5" y="391"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="305.5" y="393"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="305.5" y="397"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="191.5" y="419.5352">io_service_client</text><!--MD5=[2bb8d7b77df7889552b47219ce8f40e6]
entity pqrs::karabiner::driverkit::virtual_hid_device_service::client--><rect fill="#FEFECE" filter="url(#f1f9jaj6za1dda)" height="46.4883" style="stroke: #A80036; stroke-width: 1.5;" width="439" x="32.5" y="41"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="451.5" y="46"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="449.5" y="48"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="449.5" y="52"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="399" x="47.5" y="74.5352">pqrs::karabiner::driverkit::virtual_hid_device_service::client</text><!--MD5=[81fa4fcd478b34ef7610af5c9ac7bc3f]
link IOService to VirtualHIDDeviceRoot--><path d="M252,545.27 C252,561.96 252,600.16 252,624.71 " fill="none" id="IOService-VirtualHIDDeviceRoot" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9113644f0ab16463ec1cc313812afc58]
link VirtualHIDDeviceRoot to VirtualHIDDeviceUserClient--><path d="M252,671.06 C252,687.05 252,708.78 252,725.84 " fill="none" id="VirtualHIDDeviceRoot-to-VirtualHIDDeviceUserClient" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="252,730.98,256,721.98,252,725.98,248,721.98,252,730.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c105c796fd1092a58db9e9d90653a530]
link VirtualHIDDeviceUserClient to VirtualHIDKeyboard--><path d="M242.24,777.06 C235.11,793.19 225.39,815.15 217.82,832.28 " fill="none" id="VirtualHIDDeviceUserClient-to-VirtualHIDKeyboard" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="215.74,836.98,223.0294,830.3569,217.7561,832.4045,215.7085,827.1312,215.74,836.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[83fe701b7fb7e8b45bd4d59bb3f10c27]
link VirtualHIDDeviceUserClient to VirtualHIDPointing--><path d="M285.72,777.06 C311.33,793.81 346.56,816.85 373.14,834.24 " fill="none" id="VirtualHIDDeviceUserClient-to-VirtualHIDPointing" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="377.33,836.98,371.9749,828.7143,373.1414,834.2495,367.6061,835.4161,377.33,836.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[203579112eb5da4cafbc7d251f824b4e]
link serversock to virtual_hid_device_service_server--><path d="M252,200.27 C252,216.96 252,255.16 252,279.71 " fill="none" id="serversock-virtual_hid_device_service_server" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9c559f79c1ff7782f8b886eadaadcc0f]
link virtual_hid_device_service_server to io_service_client--><path d="M252,326.06 C252,342.05 252,363.78 252,380.84 " fill="none" id="virtual_hid_device_service_server-to-io_service_client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="252,385.98,256,376.98,252,380.98,248,376.98,252,385.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f6d3286a18c0eed3c9da184ef5d1b876]
link io_service_client to IOService--><path d="M252,432.06 C252,458.05 252,500.4 252,521.77 " fill="none" id="io_service_client-to-IOService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="252,526.97,256,517.97,252,521.97,248,517.97,252,526.97" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ca4e173bad55a88f47a848c2aa5163fa]
link pqrs::karabiner::driverkit::virtual_hid_device_service::client to serversock--><path d="M252,87.06 C252,113.05 252,155.4 252,176.77 " fill="none" id="pqrs::karabiner::driverkit::virtual_hid_device_service::client-to-serversock" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="252,181.97,256,172.97,252,176.97,248,172.97,252,181.97" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0524f91b2ba2bf23e91dc11e272ce0a1]
@startuml components

package "DriverKit driver" {
  () IOService - - [VirtualHIDDeviceRoot]
  [VirtualHIDDeviceRoot] - -> [VirtualHIDDeviceUserClient]
  [VirtualHIDDeviceUserClient] - -> [VirtualHIDKeyboard]
  [VirtualHIDDeviceUserClient] - -> [VirtualHIDPointing]
}

package "VirtualHIDDeviceClient" {
  () "UNIX domain socket" as serversock
  serversock - - [virtual_hid_device_service_server]
  [virtual_hid_device_service_server] - -> [io_service_client]
  [io_service_client] - -> () IOService
}

package "Client app" {
  [pqrs::karabiner::driverkit::virtual_hid_device_service::client] - -> serversock
}

@enduml

PlantUML version 1.2020.16(Mon Aug 24 05:20:43 JST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: JP
--></g></svg>